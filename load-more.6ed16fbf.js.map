{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,oDAKMC,EAAW,CACfC,YAAaC,SAASC,cAAc,6BACpCC,WAAYF,SAASC,cAAc,gBACnCE,KAAMH,SAASC,cAAc,YAC7BG,YAAaJ,SAASC,cAAc,eAGlCI,EAAc,EACdC,EAAU,GACVC,EAAQT,EAASC,YAAYS,M,SAIlBC,I,OAAAA,EAAfC,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAC,EAA6BC,G,kEAC3BA,EAAIC,iBACJjB,EAASK,KAAKa,UAAY,GAC1BX,EAAc,EACdE,EAAQT,EAASC,YAAYS,OAE7B,EAAAS,EAAAC,aAAYX,EAAOF,EAAaC,GAC7Ba,MAAK,SAAAC,GACJ,IAAIC,EAAaD,EAAKE,UAAYhB,EAE9Bc,EAAKG,KAAKC,OAAS,GACrBC,EAAAC,OAAOC,QAAQ,oBAAmCC,OAAfR,EAAKE,UAAU,aAClDxB,EAASK,KAAK0B,mBAAmB,YAAaC,EAAaV,EAAKG,OAChE,IAAIb,EAAAqB,GAAJ,CAAmB,cACnBjC,EAASM,YAAY4B,UAAUC,QAAQ,mBAAoB,aAEvD5B,EAAcgB,EAChBvB,EAASM,YAAY4B,UAAUC,QAC7B,mBACA,cAGFnC,EAASM,YAAY4B,UAAUC,QAC7B,YACA,oBAEFR,EAAAC,OAAOQ,KACL,iEAIJT,EAAAC,OAAOS,QACL,4EAEFrC,EAASK,KAAKa,UAAY,G,IAG7BoB,MAAMC,G,4CArCiBC,MAAAC,KAAAC,U,CAuD5B,SAASV,EAAaV,GACpB,OAAOA,EACJqB,KACC,SAAAC,G,IACEC,EAAYD,EAAZC,aACAC,EAAaF,EAAbE,cACAC,EAAIH,EAAJG,KACAC,EAAKJ,EAALI,MACAC,EAAKL,EAALK,MACAC,EAAQN,EAARM,SACAC,EAASP,EAATO,U,MAEA,+FAE4ErB,OAAhDgB,EAAc,oCAAsDhB,OAApBe,EAAa,SAG/Ef,OAHsFiB,EAAK,uGAM3FjB,OAHAkB,EAAM,qEAMHlB,OAHHmB,EAAM,4EAMFnB,OAHDoB,EAAS,2EAGEpB,OAAVqB,EAAU,+C,IAK3BC,KAAK,G,CAGV,SAASb,IACPvC,EAASM,YAAY4B,UAAUC,QAAQ,YAAa,oBACpDR,EAAAC,OAAOS,QACL,2E,CA/FJrC,EAASM,YAAY4B,UAAUC,QAAQ,YAAa,oBACpDnC,EAASI,WAAWiD,iBAAiB,U,SAERrC,G,OAAdL,EAAa6B,MAAAC,KAAAC,U,IAqD5B1C,EAASM,YAAY+C,iBAAiB,SAbtC,WACE5C,EAAQT,EAASC,YAAYS,MAC7BH,GAAe,GACf,EAAAY,EAAAC,aAAYX,EAAOF,EAAaC,GAASa,MAAK,SAAAC,GAC5CtB,EAASK,KAAK0B,mBAAmB,YAAaC,EAAaV,EAAKG,OACjD,IAAIb,EAAAqB,GAAJ,CAAmB,cAAlC,IACIV,EAAaD,EAAKE,UAAYhB,EAC9BD,GAAegB,IACjBvB,EAASM,YAAY4B,UAAUC,QAAQ,YAAa,oBACpDR,EAAAC,OAAOQ,KAAK,8D","sources":["src/js/load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { fetchSearch } from './search-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst elements = {\n  searchQuery: document.querySelector('input[name=\"searchQuery\"]'),\n  searchForm: document.querySelector('.search-form'),\n  list: document.querySelector('.gallery'),\n  butLoadMore: document.querySelector('.load-more'),\n};\n\nlet currentPage = 0;\nlet perPage = 40;\nlet input = elements.searchQuery.value;\nelements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\nelements.searchForm.addEventListener('submit', hendlerSearch);\n\nasync function hendlerSearch(evt) {\n  evt.preventDefault();\n  elements.list.innerHTML = '';\n  currentPage = 1;\n  input = elements.searchQuery.value;\n\n  fetchSearch(input, currentPage, perPage)\n    .then(data => {\n      let total_Page = data.totalHits / perPage;\n\n      if (data.hits.length > 0) {\n        Notify.success(`Hooray! We found ${data.totalHits} images.`);\n        elements.list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n        new SimpleLightbox('.gallery a');\n        elements.butLoadMore.classList.replace('load-more-hidden', 'load-more');\n\n        if (currentPage < total_Page) {\n          elements.butLoadMore.classList.replace(\n            'load-more-hidden',\n            'load-more'\n          );\n        } else {\n          elements.butLoadMore.classList.replace(\n            'load-more',\n            'load-more-hidden'\n          );\n          Notify.info(\n            \"We're sorry, but you've reached the end of search results.\"\n          );\n        }\n      } else {\n        Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        elements.list.innerHTML = '';\n      }\n    })\n    .catch(onSubmitError);\n}\n\nfunction onLoadMore() {\n  input = elements.searchQuery.value;\n  currentPage += 1;\n  fetchSearch(input, currentPage, perPage).then(data => {\n    elements.list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    var lightbox = new SimpleLightbox('.gallery a');\n    let total_Page = data.totalHits / perPage;\n    if (currentPage >= total_Page) {\n      elements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\n      Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n  });\n}\nelements.butLoadMore.addEventListener('click', onLoadMore);\n\nfunction createMarkup(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<div class=\"photo-card\">\n       <div class=\"img_block\">\n    <a class=\"gallery_link\" href =${largeImageURL}><img class=\"gallery_image\" src=${webformatURL} alt=${tags} loading=\"lazy\" /></a></div>\n    <ul class=\"info\">\n      <li class=\"info-item\">\n        Likes<p>${likes}</p>\n      </li>\n      <li class=\"info-item\">\n        Views<p>${views}</p>\n        </li>\n        <li class=\"info-item\">\n        Comments<p>${comments}</p>\n        </li>\n      <li class=\"info-item\">\n        Downloads<p>${downloads}</p>\n        </li>\n        </ul>\n  </div>`\n    )\n    .join('');\n}\n\nfunction onSubmitError() {\n  elements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\n  Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n}\n"],"names":["$bpxeT","parcelRequire","$59bb3250e981eb05$var$elements","searchQuery","document","querySelector","searchForm","list","butLoadMore","$59bb3250e981eb05$var$currentPage","$59bb3250e981eb05$var$perPage","$59bb3250e981eb05$var$input","value","$59bb3250e981eb05$var$_hendlerSearch","$parcel$interopDefault","$2TvXO","mark","_callee","evt","preventDefault","innerHTML","$fxMCL","fetchSearch","then","data","total_Page","totalHits","hits","length","$h6c0i","Notify","success","concat","insertAdjacentHTML","$59bb3250e981eb05$var$createMarkup","$5IjG7","classList","replace","info","failure","catch","$59bb3250e981eb05$var$onSubmitError","apply","this","arguments","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","addEventListener"],"version":3,"file":"load-more.6ed16fbf.js.map"}
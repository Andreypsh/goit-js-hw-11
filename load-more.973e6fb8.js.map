{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BAKMC,EAAW,CACfC,YAAaC,SAASC,cAAc,6BACpCC,WAAYF,SAASC,cAAc,gBACnCE,KAAMH,SAASC,cAAc,YAC7BG,YAAaJ,SAASC,cAAc,eAGlCI,EAAc,EAEdC,EAAQR,EAASC,YAAYQ,MAwCjC,SAASC,EAAaC,GACpB,OAAOA,EACJC,KACC,SAAAC,G,IACEC,EAAYD,EAAZC,aACAC,EAAaF,EAAbE,cACAC,EAAIH,EAAJG,KACAC,EAAKJ,EAALI,MACAC,EAAKL,EAALK,MACAC,EAAQN,EAARM,SACAC,EAASP,EAATO,U,MAEA,+FAE4EC,OAAhDN,EAAc,oCAAsDM,OAApBP,EAAa,SAG/EO,OAHsFL,EAAK,uGAM3FK,OAHAJ,EAAM,qEAMHI,OAHHH,EAAM,4EAMFG,OAHDF,EAAS,2EAGEE,OAAVD,EAAU,+C,IAK3BE,KAAK,G,CAGV,SAASC,IACPvB,EAASM,YAAYkB,UAAUC,QAAQ,YAAa,oBACpD3B,EAAA4B,OAAOC,QACL,2E,CA5EJ3B,EAASM,YAAYkB,UAAUC,QAAQ,YAAa,oBACpDzB,EAASI,WAAWwB,iBAAiB,UAErC,SAAuBC,GACrBA,EAAIC,iBACJ9B,EAASK,KAAK0B,UAAY,GAC1BxB,EAAc,EACdC,EAAQR,EAASC,YAAYQ,OAC7B,EAAAuB,EAAAC,aAAYzB,EAAOD,EAVP,IAWT2B,MAAK,SAAAvB,GACAA,EAAKwB,KAAKC,OAAS,EACrBtC,EAAA4B,OAAOW,QAAQ,oBAAmChB,OAAfV,EAAK2B,UAAU,aAElDC,SAASb,OAAOC,QACd,4EAGJ3B,EAASK,KAAKmC,mBAAmB,YAAa9B,EAAaC,EAAKwB,OAChE,IAAIM,EAAAC,GAAJ,CAAmB,cACnB1C,EAASM,YAAYkB,UAAUC,QAAQ,mBAAoB,Y,IAE5DkB,MAAMpB,E,IAgBXvB,EAASM,YAAYsB,iBAAiB,SAbtC,WACEpB,EAAQR,EAASC,YAAYQ,MAC7BF,GAAe,GACf,EAAAyB,EAAAC,aAAYzB,EAAOD,EA7BP,IA6B6B2B,MAAK,SAAAvB,GAC5CX,EAASK,KAAKmC,mBAAmB,YAAa9B,EAAaC,EAAKwB,OACjD,IAAIM,EAAAC,GAAJ,CAAmB,cAAlC,IACIE,EAAajC,EAAK2B,UAhCZ,GAiCN/B,GAAeqC,IACjB5C,EAASM,YAAYkB,UAAUC,QAAQ,YAAa,oBACpD3B,EAAA4B,OAAOmB,KAAK,8D","sources":["src/js/load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { fetchSearch } from './search-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst elements = {\n  searchQuery: document.querySelector('input[name=\"searchQuery\"]'),\n  searchForm: document.querySelector('.search-form'),\n  list: document.querySelector('.gallery'),\n  butLoadMore: document.querySelector('.load-more'),\n};\n\nlet currentPage = 0;\nlet perPage = 40;\nlet input = elements.searchQuery.value;\nelements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\nelements.searchForm.addEventListener('submit', hendlerSearch);\n\nfunction hendlerSearch(evt) {\n  evt.preventDefault();\n  elements.list.innerHTML = '';\n  currentPage = 1;\n  input = elements.searchQuery.value;\n  fetchSearch(input, currentPage, perPage)\n    .then(data => {\n      if (data.hits.length > 0) {\n        Notify.success(`Hooray! We found ${data.totalHits} images.`);\n      } else {\n        Notiflix.Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n      }\n      elements.list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n      new SimpleLightbox('.gallery a');\n      elements.butLoadMore.classList.replace('load-more-hidden', 'load-more');\n    })\n    .catch(onSubmitError);\n}\n\nfunction onLoadMore() {\n  input = elements.searchQuery.value;\n  currentPage += 1;\n  fetchSearch(input, currentPage, perPage).then(data => {\n    elements.list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    var lightbox = new SimpleLightbox('.gallery a');\n    let total_Page = data.totalHits / perPage;\n    if (currentPage >= total_Page) {\n      elements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\n      Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n  });\n}\nelements.butLoadMore.addEventListener('click', onLoadMore);\n\nfunction createMarkup(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<div class=\"photo-card\">\n       <div class=\"img_block\">\n    <a class=\"gallery_link\" href =${largeImageURL}><img class=\"gallery_image\" src=${webformatURL} alt=${tags} loading=\"lazy\" /></a></div>\n    <ul class=\"info\">\n      <li class=\"info-item\">\n        Likes<p>${likes}</p>\n      </li>\n      <li class=\"info-item\">\n        Views<p>${views}</p>\n        </li>\n        <li class=\"info-item\">\n        Comments<p>${comments}</p>\n        </li>\n      <li class=\"info-item\">\n        Downloads<p>${downloads}</p>\n        </li>\n        </ul>\n  </div>`\n    )\n    .join('');\n}\n\nfunction onSubmitError() {\n  elements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\n  Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n}\n"],"names":["$h6c0i","parcelRequire","$59bb3250e981eb05$var$elements","searchQuery","document","querySelector","searchForm","list","butLoadMore","$59bb3250e981eb05$var$currentPage","$59bb3250e981eb05$var$input","value","$59bb3250e981eb05$var$createMarkup","data","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","concat","join","$59bb3250e981eb05$var$onSubmitError","classList","replace","Notify","failure","addEventListener","evt","preventDefault","innerHTML","$fxMCL","fetchSearch","then","hits","length","success","totalHits","Notiflix","insertAdjacentHTML","$parcel$interopDefault","$5IjG7","catch","total_Page","info"],"version":3,"file":"load-more.973e6fb8.js.map"}
{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,0BAKA,MAAMC,EAAW,CACfC,YAAaC,SAASC,cAAc,6BACpCC,WAAYF,SAASC,cAAc,gBACnCE,KAAMH,SAASC,cAAc,YAC7BG,YAAaJ,SAASC,cAAc,eAGtC,IAAII,EAAc,EAEdC,EAAQR,EAASC,YAAYQ,MA2DjC,SAASC,EAAaC,GACpB,OAAOA,EACJC,KACC,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEA,+FAE4BL,oCAAgDD,SAAoBE,uGAGtFC,qEAGAC,4EAGGC,2EAGCC,kDAKjBC,KAAK,G,CAGV,SAASC,IACPrB,EAASM,YAAYgB,UAAUC,QAAQ,YAAa,oBACpDzB,EAAA0B,OAAOC,QACL,2E,CA/FJzB,EAASM,YAAYgB,UAAUC,QAAQ,YAAa,oBACpDvB,EAASI,WAAWsB,iBAAiB,UAErCC,eAA6BC,GAC3BA,EAAIC,iBACJ7B,EAASK,KAAKyB,UAAY,GAC1BvB,EAAc,EACdC,EAAQR,EAASC,YAAYQ,OAE7B,EAAAsB,EAAAC,aAAYxB,EAAOD,EAXP,IAYT0B,MAAKtB,IACJ,IAAIuB,EAAavB,EAAKwB,UAbd,GAeJxB,EAAKyB,KAAKC,OAAS,GACrBvC,EAAA0B,OAAOc,QAAQ,oBAAoB3B,EAAKwB,qBACxCnC,EAASK,KAAKkC,mBAAmB,YAAa7B,EAAaC,EAAKyB,OAChE,IAAII,EAAAC,GAAJ,CAAmB,cACnBzC,EAASM,YAAYgB,UAAUC,QAAQ,mBAAoB,aAEvDhB,EAAc2B,EAChBlC,EAASM,YAAYgB,UAAUC,QAC7B,mBACA,cAGFvB,EAASM,YAAYgB,UAAUC,QAC7B,YACA,oBAEFzB,EAAA0B,OAAOkB,KACL,iEAIJ5C,EAAA0B,OAAOC,QACL,4EAEFzB,EAASK,KAAKyB,UAAY,G,IAG7Ba,MAAMtB,E,IAgBXrB,EAASM,YAAYoB,iBAAiB,SAbtC,WACElB,EAAQR,EAASC,YAAYQ,MAC7BF,GAAe,GACf,EAAAwB,EAAAC,aAAYxB,EAAOD,EAhDP,IAgD6B0B,MAAKtB,IAC5CX,EAASK,KAAKkC,mBAAmB,YAAa7B,EAAaC,EAAKyB,OACjD,IAAII,EAAAC,GAAJ,CAAmB,cAClC,IAAIP,EAAavB,EAAKwB,UAnDZ,GAoDN5B,GAAe2B,IACjBlC,EAASM,YAAYgB,UAAUC,QAAQ,YAAa,oBACpDzB,EAAA0B,OAAOkB,KAAK,8D","sources":["src/js/load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { fetchSearch } from './search-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst elements = {\n  searchQuery: document.querySelector('input[name=\"searchQuery\"]'),\n  searchForm: document.querySelector('.search-form'),\n  list: document.querySelector('.gallery'),\n  butLoadMore: document.querySelector('.load-more'),\n};\n\nlet currentPage = 0;\nlet perPage = 40;\nlet input = elements.searchQuery.value;\nelements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\nelements.searchForm.addEventListener('submit', hendlerSearch);\n\nasync function hendlerSearch(evt) {\n  evt.preventDefault();\n  elements.list.innerHTML = '';\n  currentPage = 1;\n  input = elements.searchQuery.value;\n\n  fetchSearch(input, currentPage, perPage)\n    .then(data => {\n      let total_Page = data.totalHits / perPage;\n\n      if (data.hits.length > 0) {\n        Notify.success(`Hooray! We found ${data.totalHits} images.`);\n        elements.list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n        new SimpleLightbox('.gallery a');\n        elements.butLoadMore.classList.replace('load-more-hidden', 'load-more');\n\n        if (currentPage < total_Page) {\n          elements.butLoadMore.classList.replace(\n            'load-more-hidden',\n            'load-more'\n          );\n        } else {\n          elements.butLoadMore.classList.replace(\n            'load-more',\n            'load-more-hidden'\n          );\n          Notify.info(\n            \"We're sorry, but you've reached the end of search results.\"\n          );\n        }\n      } else {\n        Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        elements.list.innerHTML = '';\n      }\n    })\n    .catch(onSubmitError);\n}\n\nfunction onLoadMore() {\n  input = elements.searchQuery.value;\n  currentPage += 1;\n  fetchSearch(input, currentPage, perPage).then(data => {\n    elements.list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    var lightbox = new SimpleLightbox('.gallery a');\n    let total_Page = data.totalHits / perPage;\n    if (currentPage >= total_Page) {\n      elements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\n      Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n  });\n}\nelements.butLoadMore.addEventListener('click', onLoadMore);\n\nfunction createMarkup(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<div class=\"photo-card\">\n       <div class=\"img_block\">\n    <a class=\"gallery_link\" href =${largeImageURL}><img class=\"gallery_image\" src=${webformatURL} alt=${tags} loading=\"lazy\" /></a></div>\n    <ul class=\"info\">\n      <li class=\"info-item\">\n        Likes<p>${likes}</p>\n      </li>\n      <li class=\"info-item\">\n        Views<p>${views}</p>\n        </li>\n        <li class=\"info-item\">\n        Comments<p>${comments}</p>\n        </li>\n      <li class=\"info-item\">\n        Downloads<p>${downloads}</p>\n        </li>\n        </ul>\n  </div>`\n    )\n    .join('');\n}\n\nfunction onSubmitError() {\n  elements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\n  Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n}\n"],"names":["$iQIUW","parcelRequire","$e13b538bfdccfbd0$var$elements","searchQuery","document","querySelector","searchForm","list","butLoadMore","$e13b538bfdccfbd0$var$currentPage","$e13b538bfdccfbd0$var$input","value","$e13b538bfdccfbd0$var$createMarkup","data","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","$e13b538bfdccfbd0$var$onSubmitError","classList","replace","Notify","failure","addEventListener","async","evt","preventDefault","innerHTML","$arR5w","fetchSearch","then","total_Page","totalHits","hits","length","success","insertAdjacentHTML","$parcel$interopDefault","$fZKcF","info","catch"],"version":3,"file":"load-more.31321357.js.map"}
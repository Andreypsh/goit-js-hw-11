{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,0BAKA,MAAMC,EAAW,CACfC,YAAaC,SAASC,cAAc,6BACpCC,WAAYF,SAASC,cAAc,gBACnCE,KAAMH,SAASC,cAAc,YAC7BG,YAAaJ,SAASC,cAAc,eAGtC,IAAII,EAAc,EAEdC,EAAQR,EAASC,YAAYQ,MAwCjC,SAASC,EAAaC,GACpB,OAAOA,EACJC,KACC,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEA,+FAE4BL,oCAAgDD,SAAoBE,uGAGtFC,qEAGAC,4EAGGC,2EAGCC,kDAKjBC,KAAK,G,CAGV,SAASC,IACPrB,EAASM,YAAYgB,UAAUC,QAAQ,YAAa,oBACpDzB,EAAA0B,OAAOC,QACL,2E,CA5EJzB,EAASM,YAAYgB,UAAUC,QAAQ,YAAa,oBACpDvB,EAASI,WAAWsB,iBAAiB,UAErC,SAAuBC,GACrBA,EAAIC,iBACJ5B,EAASK,KAAKwB,UAAY,GAC1BtB,EAAc,EACdC,EAAQR,EAASC,YAAYQ,OAC7B,EAAAqB,EAAAC,aAAYvB,EAAOD,EAVP,IAWTyB,MAAKrB,IACAA,EAAKsB,KAAKC,OAAS,EACrBpC,EAAA0B,OAAOW,QAAQ,oBAAoBxB,EAAKyB,qBAExCC,SAASb,OAAOC,QACd,4EAGJzB,EAASK,KAAKiC,mBAAmB,YAAa5B,EAAaC,EAAKsB,OAChE,IAAIM,EAAAC,GAAJ,CAAmB,cACnBxC,EAASM,YAAYgB,UAAUC,QAAQ,mBAAoB,YAAY,IAExEkB,MAAMpB,E,IAgBXrB,EAASM,YAAYoB,iBAAiB,SAbtC,WACElB,EAAQR,EAASC,YAAYQ,MAC7BF,GAAe,GACf,EAAAuB,EAAAC,aAAYvB,EAAOD,EA7BP,IA6B6ByB,MAAKrB,IAC5CX,EAASK,KAAKiC,mBAAmB,YAAa5B,EAAaC,EAAKsB,OACjD,IAAIM,EAAAC,GAAJ,CAAmB,cAClC,IAAIE,EAAa/B,EAAKyB,UAhCZ,GAiCN7B,GAAemC,IACjB1C,EAASM,YAAYgB,UAAUC,QAAQ,YAAa,oBACpDzB,EAAA0B,OAAOmB,KAAK,8D","sources":["src/js/load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { fetchSearch } from './search-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst elements = {\n  searchQuery: document.querySelector('input[name=\"searchQuery\"]'),\n  searchForm: document.querySelector('.search-form'),\n  list: document.querySelector('.gallery'),\n  butLoadMore: document.querySelector('.load-more'),\n};\n\nlet currentPage = 0;\nlet perPage = 40;\nlet input = elements.searchQuery.value;\nelements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\nelements.searchForm.addEventListener('submit', hendlerSearch);\n\nfunction hendlerSearch(evt) {\n  evt.preventDefault();\n  elements.list.innerHTML = '';\n  currentPage = 1;\n  input = elements.searchQuery.value;\n  fetchSearch(input, currentPage, perPage)\n    .then(data => {\n      if (data.hits.length > 0) {\n        Notify.success(`Hooray! We found ${data.totalHits} images.`);\n      } else {\n        Notiflix.Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n      }\n      elements.list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n      new SimpleLightbox('.gallery a');\n      elements.butLoadMore.classList.replace('load-more-hidden', 'load-more');\n    })\n    .catch(onSubmitError);\n}\n\nfunction onLoadMore() {\n  input = elements.searchQuery.value;\n  currentPage += 1;\n  fetchSearch(input, currentPage, perPage).then(data => {\n    elements.list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    var lightbox = new SimpleLightbox('.gallery a');\n    let total_Page = data.totalHits / perPage;\n    if (currentPage >= total_Page) {\n      elements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\n      Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n  });\n}\nelements.butLoadMore.addEventListener('click', onLoadMore);\n\nfunction createMarkup(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<div class=\"photo-card\">\n       <div class=\"img_block\">\n    <a class=\"gallery_link\" href =${largeImageURL}><img class=\"gallery_image\" src=${webformatURL} alt=${tags} loading=\"lazy\" /></a></div>\n    <ul class=\"info\">\n      <li class=\"info-item\">\n        Likes<p>${likes}</p>\n      </li>\n      <li class=\"info-item\">\n        Views<p>${views}</p>\n        </li>\n        <li class=\"info-item\">\n        Comments<p>${comments}</p>\n        </li>\n      <li class=\"info-item\">\n        Downloads<p>${downloads}</p>\n        </li>\n        </ul>\n  </div>`\n    )\n    .join('');\n}\n\nfunction onSubmitError() {\n  elements.butLoadMore.classList.replace('load-more', 'load-more-hidden');\n  Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n}\n"],"names":["$iQIUW","parcelRequire","$e13b538bfdccfbd0$var$elements","searchQuery","document","querySelector","searchForm","list","butLoadMore","$e13b538bfdccfbd0$var$currentPage","$e13b538bfdccfbd0$var$input","value","$e13b538bfdccfbd0$var$createMarkup","data","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","$e13b538bfdccfbd0$var$onSubmitError","classList","replace","Notify","failure","addEventListener","evt","preventDefault","innerHTML","$arR5w","fetchSearch","then","hits","length","success","totalHits","Notiflix","insertAdjacentHTML","$parcel$interopDefault","$fZKcF","catch","total_Page","info"],"version":3,"file":"load-more.f06e41cd.js.map"}